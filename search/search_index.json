{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"data-bridge","text":"<p>High-performance MongoDB ORM for Python with Rust backend.</p> <p>data-bridge is a Beanie-compatible ORM that handles all BSON serialization and CPU-intensive tasks in Rust, offering significant performance improvements (1.4x - 5.4x faster).</p>"},{"location":"#documentation","title":"Documentation","text":"<p>Please select your language:</p> <ul> <li>English User Guide</li> <li>\u7e41\u9ad4\u4e2d\u6587\u4f7f\u7528\u6307\u5357 (Traditional Chinese)</li> </ul>"},{"location":"#features","title":"Features","text":"<ul> <li>Fast: Core engine written in Rust.</li> <li>Safe: Type validation and memory safety.</li> <li>Compatible: Drop-in replacement for Beanie (mostly).</li> <li>Async: Built on <code>tokio</code> and <code>motor</code>.</li> </ul>"},{"location":"en/user-guide/","title":"User Guide","text":"<p><code>data-bridge</code> is a high-performance MongoDB ORM for Python, powered by a Rust backend. It provides a Beanie-compatible API while handling all BSON serialization and CPU-intensive tasks in Rust, offering significant performance improvements.</p>"},{"location":"en/user-guide/#getting-started","title":"Getting Started","text":"<p>First, initialize the connection to your MongoDB instance. This is typically done at application startup.</p> <pre><code>import asyncio\nfrom data_bridge import init\n\nasync def main():\n    # Initialize with connection string and database name\n    await init(\"mongodb://localhost:27017/my_database\")\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"en/user-guide/#defining-models","title":"Defining Models","text":"<p>Models are defined by inheriting from <code>Document</code>. You can use standard Python type hints.</p> <pre><code>from typing import Optional\nfrom data_bridge import Document, Indexed\n\nclass User(Document):\n    name: str\n    email: Indexed(str, unique=True)  # Create a unique index\n    age: int = 0\n    is_active: bool = True\n\n    class Settings:\n        name = \"users\"  # Collection name\n</code></pre>"},{"location":"en/user-guide/#settings-configuration","title":"Settings Configuration","text":"<p>The <code>Settings</code> inner class configures the model:</p> <ul> <li><code>name</code>: Collection name (defaults to class name in lowercase)</li> <li><code>indexes</code>: List of index definitions</li> <li><code>use_revision</code>: Enable optimistic locking via <code>_revision_id</code></li> <li><code>is_root</code>: Mark as root for document inheritance</li> </ul>"},{"location":"en/user-guide/#crud-operations","title":"CRUD Operations","text":""},{"location":"en/user-guide/#create","title":"Create","text":"<p>Create a new document instance and save it.</p> <pre><code>user = User(name=\"Alice\", email=\"alice@example.com\", age=30)\nawait user.save()\n</code></pre>"},{"location":"en/user-guide/#read","title":"Read","text":"<p>Find documents by ID or other criteria.</p> <pre><code># Find by ID\nuser = await User.get(\"507f1f77bcf86cd799439011\")\n\n# Find one by field\nuser = await User.find_one(User.email == \"alice@example.com\")\n</code></pre>"},{"location":"en/user-guide/#update","title":"Update","text":"<p>Modify fields and save changes.</p> <pre><code>user.age = 31\nawait user.save()\n\n# Update using query (without fetching first)\nawait User.find(User.name == \"Alice\").update({\"$set\": {\"age\": 32}})\n</code></pre>"},{"location":"en/user-guide/#delete","title":"Delete","text":"<p>Delete a document instance or match documents.</p> <pre><code># Delete instance\nawait user.delete()\n\n# Delete by query\nawait User.find(User.is_active == False).delete()\n</code></pre>"},{"location":"en/user-guide/#querying","title":"Querying","text":"<p><code>data-bridge</code> supports a fluent, chainable query API with type-safe expressions.</p>"},{"location":"en/user-guide/#basic-filtering","title":"Basic Filtering","text":"<pre><code># Exact match\nusers = await User.find(User.age == 30).to_list()\n\n# Comparison operators\nusers = await User.find(User.age &gt; 25).to_list()\nusers = await User.find(User.age &lt;= 50).to_list()\n\n# Multiple conditions (AND)\nusers = await User.find(\n    User.age &gt; 25,\n    User.is_active == True\n).to_list()\n</code></pre>"},{"location":"en/user-guide/#sorting-skipping-and-limiting","title":"Sorting, Skipping, and Limiting","text":"<pre><code>users = await User.find(User.is_active == True) \\\n    .sort(-User.age) \\\n    .skip(10) \\\n    .limit(20) \\\n    .to_list()\n</code></pre> <ul> <li><code>.sort(+User.field)</code>: Ascending</li> <li><code>.sort(-User.field)</code>: Descending</li> </ul>"},{"location":"en/user-guide/#projections","title":"Projections","text":"<p>Fetch only specific fields to save bandwidth.</p> <pre><code># Include only name and email\nusers = await User.find().project(name=1, email=1).to_list()\n</code></pre>"},{"location":"en/user-guide/#bulk-operations","title":"Bulk Operations","text":"<p>Perform multiple write operations efficiently using the fluent bulk API. All operations are processed in Rust.</p> <pre><code>from data_bridge import UpdateOne, InsertOne, DeleteOne\n\nawait User.bulk_write([\n    # Insert a new user\n    InsertOne(User(name=\"Bob\", email=\"bob@example.com\")),\n\n    # Update existing user\n    UpdateOne(User.email == \"alice@example.com\")\n        .set(User.status, \"vip\")\n        .inc(User.login_count, 1),\n\n    # Delete inactive users\n    DeleteOne(User.last_login &lt; \"2023-01-01\")\n])\n</code></pre>"},{"location":"en/user-guide/#advanced-models","title":"Advanced Models","text":""},{"location":"en/user-guide/#embedded-documents","title":"Embedded Documents","text":"<p>You can nest documents within other documents using <code>EmbeddedDocument</code>. Unlike <code>Document</code>, these don't have their own collection.</p> <pre><code>from data_bridge import Document, EmbeddedDocument\n\nclass Address(EmbeddedDocument):\n    city: str\n    zip_code: str\n    street: str | None = None\n\nclass User(Document):\n    name: str\n    address: Address\n\n    class Settings:\n        name = \"users\"\n\n# Usage\nuser = User(\n    name=\"Alice\",\n    address=Address(city=\"NYC\", zip_code=\"10001\")\n)\nawait user.save()\n</code></pre>"},{"location":"en/user-guide/#constraints-and-validation","title":"Constraints and Validation","text":"<p><code>data-bridge</code> supports field-level validation using <code>typing.Annotated</code>. Validation is performed in the Rust backend for high performance.</p> <pre><code>from typing import Annotated\nfrom data_bridge import Document, MinLen, MaxLen, Min, Max, Email, Url\n\nclass Product(Document):\n    name: Annotated[str, MinLen(3), MaxLen(100)]\n    price: Annotated[float, Min(0.0)]\n    contact_email: Annotated[str, Email()]\n    website: Annotated[Optional[str], Url()] = None\n\n    class Settings:\n        use_validation = True # Enable validation on save\n</code></pre>"},{"location":"en/user-guide/#relations-links","title":"Relations (Links)","text":"<p><code>data-bridge</code> provides Beanie-compatible document linking.</p>"},{"location":"en/user-guide/#one-to-one-many-to-one","title":"One-to-One / Many-to-One","text":"<p>Use <code>Link[T]</code> to reference another document.</p> <pre><code>from data_bridge import Document, Link\n\nclass User(Document):\n    name: str\n\nclass Post(Document):\n    title: str\n    author: Link[User]\n\n# Linking\nuser = await User.find_one(User.name == \"Alice\")\npost = Post(title=\"Hello World\", author=user)\nawait post.save()\n\n# Fetching with links resolved\npost = await Post.find_one(Post.title == \"Hello World\", fetch_links=True)\nprint(post.author.name) # \"Alice\"\n</code></pre>"},{"location":"en/user-guide/#one-to-many","title":"One-to-Many","text":"<p>Use <code>BackLink[T]</code> to define the reverse relationship.</p> <pre><code>from data_bridge import Document, BackLink\n\nclass User(Document):\n    name: str\n    # References to Posts that point to this user\n    posts: BackLink[\"Post\"] = BackLink(document_class=\"Post\", link_field=\"author\")\n\n# Accessing\nuser = await User.find_one(User.name == \"Alice\", fetch_links=True)\nfor post in user.posts:\n    print(post.title)\n</code></pre>"},{"location":"en/user-guide/#programmatic-migrations","title":"Programmatic Migrations","text":"<p><code>data-bridge</code> supports programmatic migrations to evolve your schema.</p> <pre><code>from data_bridge.migrations import Migration, iterative_migration, run_migrations\n\n@iterative_migration(User, batch_size=50)\nclass NormalizeEmails(Migration):\n    version = \"001\"\n    description = \"Lowercase all email addresses\"\n\n    async def transform(self, user: User) -&gt; User:\n        user.email = user.email.lower()\n        return user\n\n# Run all pending migrations\nawait run_migrations([NormalizeEmails])\n</code></pre>"},{"location":"en/user-guide/#time-series-collections","title":"Time-Series Collections","text":"<p>For high-frequency data, use MongoDB's native time-series collections.</p> <pre><code>from datetime import datetime\nfrom data_bridge import Document\nfrom data_bridge.timeseries import TimeSeriesConfig, Granularity\n\nclass Measurement(Document):\n    timestamp: datetime\n    sensor_id: str\n    value: float\n\n    class Settings:\n        name = \"measurements\"\n        timeseries = TimeSeriesConfig(\n            time_field=\"timestamp\",\n            meta_field=\"sensor_id\",\n            granularity=Granularity.seconds,\n            expire_after_seconds=86400 * 7 # 7 days TTL\n        )\n</code></pre>"},{"location":"en/user-guide/#http-client","title":"HTTP Client","text":"<p>The library includes a high-performance async HTTP client backed by Rust (<code>reqwest</code>), which bypasses the GIL for maximum throughput.</p> <pre><code>from data_bridge.http import HttpClient\n\nclient = HttpClient(\n    base_url=\"https://api.example.com\",\n    timeout=30.0\n)\n\n# Async GET request\nresponse = await client.get(\"/users/123\")\n\nif response.is_success():\n    data = response.json()\n    print(f\"User: {data['name']}\")\n    print(f\"Latency: {response.latency_ms}ms\")\n</code></pre>"},{"location":"zh-tw/user-guide/","title":"\u4f7f\u7528\u6307\u5357 (User Guide)","text":"<p><code>data-bridge</code> \u662f\u4e00\u500b\u70ba Python \u8a2d\u8a08\u7684\u9ad8\u6548\u80fd MongoDB ORM\uff0c\u5176\u6838\u5fc3\u7531 Rust \u9a45\u52d5\u3002\u5b83\u63d0\u4f9b\u8207 Beanie \u76f8\u5bb9\u7684 API\uff0c\u540c\u6642\u5c07\u6240\u6709 BSON \u5e8f\u5217\u5316\u548c CPU \u5bc6\u96c6\u578b\u4efb\u52d9\u4ea4\u7531 Rust \u8655\u7406\uff0c\u5f9e\u800c\u986f\u8457\u63d0\u5347\u6548\u80fd\u3002</p>"},{"location":"zh-tw/user-guide/#getting-started","title":"\u5feb\u901f\u958b\u59cb (Getting Started)","text":"<p>\u9996\u5148\uff0c\u521d\u59cb\u5316\u8207 MongoDB \u5be6\u4f8b\u7684\u9023\u7dda\u3002\u9019\u901a\u5e38\u5728\u61c9\u7528\u7a0b\u5f0f\u555f\u52d5\u6642\u5b8c\u6210\u3002</p> <pre><code>import asyncio\nfrom data_bridge import init\n\nasync def main():\n    # \u4f7f\u7528\u9023\u7dda\u5b57\u4e32\u548c\u8cc7\u6599\u5eab\u540d\u7a31\u9032\u884c\u521d\u59cb\u5316\n    await init(\"mongodb://localhost:27017/my_database\")\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"zh-tw/user-guide/#defining-models","title":"\u5b9a\u7fa9\u6a21\u578b (Defining Models)","text":"<p>\u900f\u904e\u7e7c\u627f <code>Document</code> \u4f86\u5b9a\u7fa9\u6a21\u578b\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6a19\u6e96\u7684 Python \u578b\u5225\u63d0\u793a (Type Hints)\u3002</p> <pre><code>from typing import Optional\nfrom data_bridge import Document, Indexed\n\nclass User(Document):\n    name: str\n    email: Indexed(str, unique=True)  # \u5efa\u7acb\u552f\u4e00\u7d22\u5f15\n    age: int = 0\n    is_active: bool = True\n\n    class Settings:\n        name = \"users\"  # \u96c6\u5408\u540d\u7a31 (Collection name)\n</code></pre>"},{"location":"zh-tw/user-guide/#settings-configuration","title":"\u8a2d\u5b9a\u914d\u7f6e (Settings Configuration)","text":"<p><code>Settings</code> \u5167\u90e8\u985e\u5225\u7528\u65bc\u914d\u7f6e\u6a21\u578b\uff1a</p> <ul> <li><code>name</code>: \u96c6\u5408\u540d\u7a31 (\u9810\u8a2d\u70ba\u985e\u5225\u540d\u7a31\u7684\u5c0f\u5beb)</li> <li><code>indexes</code>: \u7d22\u5f15\u5b9a\u7fa9\u5217\u8868</li> <li><code>use_revision</code>: \u900f\u904e <code>_revision_id</code> \u555f\u7528\u6a02\u89c0\u9396 (Optimistic Locking)</li> <li><code>is_root</code>: \u6a19\u8a18\u70ba\u6587\u4ef6\u7e7c\u627f\u7684\u6839\u985e\u5225</li> </ul>"},{"location":"zh-tw/user-guide/#crud","title":"CRUD \u64cd\u4f5c","text":""},{"location":"zh-tw/user-guide/#create","title":"\u5efa\u7acb (Create)","text":"<p>\u5efa\u7acb\u4e00\u500b\u65b0\u7684\u6587\u4ef6\u5be6\u4f8b\u4e26\u5132\u5b58\u3002</p> <pre><code>user = User(name=\"Alice\", email=\"alice@example.com\", age=30)\nawait user.save()\n</code></pre>"},{"location":"zh-tw/user-guide/#read","title":"\u8b80\u53d6 (Read)","text":"<p>\u900f\u904e ID \u6216\u5176\u4ed6\u689d\u4ef6\u5c0b\u627e\u6587\u4ef6\u3002</p> <pre><code># \u900f\u904e ID \u5c0b\u627e\nuser = await User.get(\"507f1f77bcf86cd799439011\")\n\n# \u900f\u904e\u6b04\u4f4d\u5c0b\u627e\u55ae\u7b46\nuser = await User.find_one(User.email == \"alice@example.com\")\n</code></pre>"},{"location":"zh-tw/user-guide/#update","title":"\u66f4\u65b0 (Update)","text":"<p>\u4fee\u6539\u6b04\u4f4d\u4e26\u5132\u5b58\u8b8a\u66f4\u3002</p> <pre><code>user.age = 31\nawait user.save()\n\n# \u4f7f\u7528\u67e5\u8a62\u76f4\u63a5\u66f4\u65b0 (\u7121\u9700\u5148\u53d6\u51fa)\nawait User.find(User.name == \"Alice\").update({\"$set\": {\"age\": 32}})\n</code></pre>"},{"location":"zh-tw/user-guide/#delete","title":"\u522a\u9664 (Delete)","text":"<p>\u522a\u9664\u6587\u4ef6\u5be6\u4f8b\u6216\u7b26\u5408\u689d\u4ef6\u7684\u6587\u4ef6\u3002</p> <pre><code># \u522a\u9664\u5be6\u4f8b\nawait user.delete()\n\n# \u900f\u904e\u67e5\u8a62\u522a\u9664\nawait User.find(User.is_active == False).delete()\n</code></pre>"},{"location":"zh-tw/user-guide/#querying","title":"\u67e5\u8a62 (Querying)","text":"<p><code>data-bridge</code> \u652f\u63f4\u6d41\u66a2\u4e14\u53ef\u4e32\u63a5\u7684\u67e5\u8a62 API\uff0c\u4e26\u63d0\u4f9b\u578b\u5225\u5b89\u5168\u7684\u8868\u9054\u5f0f\u3002</p>"},{"location":"zh-tw/user-guide/#_1","title":"\u57fa\u790e\u904e\u6ffe","text":"<pre><code># \u7cbe\u78ba\u5339\u914d\nusers = await User.find(User.age == 30).to_list()\n\n# \u6bd4\u8f03\u904b\u7b97\u7b26\nusers = await User.find(User.age &gt; 25).to_list()\nusers = await User.find(User.age &lt;= 50).to_list()\n\n# \u591a\u91cd\u689d\u4ef6 (AND)\nusers = await User.find(\n    User.age &gt; 25,\n    User.is_active == True\n).to_list()\n</code></pre>"},{"location":"zh-tw/user-guide/#sorting-skipping-and-limiting","title":"\u6392\u5e8f\u3001\u8df3\u904e\u8207\u9650\u5236 (Sorting, Skipping, and Limiting)","text":"<pre><code>users = await User.find(User.is_active == True) \\\n    .sort(-User.age) \\\n    .skip(10) \\\n    .limit(20) \\\n    .to_list()\n</code></pre> <ul> <li><code>.sort(+User.field)</code>: \u5347\u51aa (Ascending)</li> <li><code>.sort(-User.field)</code>: \u964d\u51aa (Descending)</li> </ul>"},{"location":"zh-tw/user-guide/#projections","title":"\u6295\u5f71 (Projections)","text":"<p>\u50c5\u8b80\u53d6\u7279\u5b9a\u6b04\u4f4d\u4ee5\u7bc0\u7701\u983b\u5bec\u3002</p> <pre><code># \u50c5\u5305\u542b name \u548c email\nusers = await User.find().project(name=1, email=1).to_list()\n</code></pre>"},{"location":"zh-tw/user-guide/#bulk-operations","title":"\u6279\u6b21\u64cd\u4f5c (Bulk Operations)","text":"<p>\u4f7f\u7528\u6d41\u66a2\u7684\u6279\u6b21 API \u9ad8\u6548\u57f7\u884c\u591a\u500b\u5beb\u5165\u64cd\u4f5c\u3002\u6240\u6709\u64cd\u4f5c\u7686\u5728 Rust \u4e2d\u8655\u7406\u3002</p> <pre><code>from data_bridge import UpdateOne, InsertOne, DeleteOne\n\nawait User.bulk_write([\n    # \u63d2\u5165\u65b0\u4f7f\u7528\u8005\n    InsertOne(User(name=\"Bob\", email=\"bob@example.com\")),\n\n    # \u66f4\u65b0\u73fe\u6709\u4f7f\u7528\u8005\n    UpdateOne(User.email == \"alice@example.com\")\n        .set(User.status, \"vip\")\n        .inc(User.login_count, 1),\n\n    # \u522a\u9664\u4e0d\u6d3b\u8e8d\u7684\u4f7f\u7528\u8005\n    DeleteOne(User.last_login &lt; \"2023-01-01\")\n])\n</code></pre>"},{"location":"zh-tw/user-guide/#advanced-models","title":"\u9032\u968e\u6a21\u578b (Advanced Models)","text":""},{"location":"zh-tw/user-guide/#embedded-documents","title":"\u5d4c\u5165\u5f0f\u6587\u4ef6 (Embedded Documents)","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>EmbeddedDocument</code> \u5728\u6587\u4ef6\u5167\u5d4c\u5957\u5176\u4ed6\u6587\u4ef6\u3002\u8207 <code>Document</code> \u4e0d\u540c\uff0c\u9019\u4e9b\u6587\u4ef6\u6c92\u6709\u81ea\u5df1\u7368\u7acb\u7684\u96c6\u5408 (Collection)\u3002</p> <pre><code>from data_bridge import Document, EmbeddedDocument\n\nclass Address(EmbeddedDocument):\n    city: str\n    zip_code: str\n    street: str | None = None\n\nclass User(Document):\n    name: str\n    address: Address\n\n    class Settings:\n        name = \"users\"\n\n# \u4f7f\u7528\u65b9\u5f0f\nuser = User(\n    name=\"Alice\",\n    address=Address(city=\"NYC\", zip_code=\"10001\")\n)\nawait user.save()\n</code></pre>"},{"location":"zh-tw/user-guide/#constraints-and-validation","title":"\u7d04\u675f\u8207\u9a57\u8b49 (Constraints and Validation)","text":"<p><code>data-bridge</code> \u652f\u63f4\u4f7f\u7528 <code>typing.Annotated</code> \u9032\u884c\u6b04\u4f4d\u7d1a\u5225\u7684\u9a57\u8b49\u3002\u9a57\u8b49\u662f\u5728 Rust \u5f8c\u7aef\u57f7\u884c\u7684\uff0c\u4ee5\u78ba\u4fdd\u9ad8\u6548\u80fd\u3002</p> <pre><code>from typing import Annotated, Optional\nfrom data_bridge import Document, MinLen, MaxLen, Min, Max, Email, Url\n\nclass Product(Document):\n    name: Annotated[str, MinLen(3), MaxLen(100)]\n    price: Annotated[float, Min(0.0)]\n    contact_email: Annotated[str, Email()]\n    website: Annotated[Optional[str], Url()] = None\n\n    class Settings:\n        use_validation = True # \u5132\u5b58\u6642\u555f\u7528\u9a57\u8b49\n</code></pre>"},{"location":"zh-tw/user-guide/#relations-links","title":"\u95dc\u806f (Relations / Links)","text":"<p><code>data-bridge</code> \u63d0\u4f9b\u8207 Beanie \u76f8\u5bb9\u7684\u6587\u4ef6\u9023\u7d50\u529f\u80fd\u3002</p>"},{"location":"zh-tw/user-guide/#_2","title":"\u4e00\u5c0d\u4e00 / \u591a\u5c0d\u4e00","text":"<p>\u4f7f\u7528 <code>Link[T]</code> \u5f15\u7528\u53e6\u4e00\u500b\u6587\u4ef6\u3002</p> <pre><code>from data_bridge import Document, Link\n\nclass User(Document):\n    name: str\n\nclass Post(Document):\n    title: str\n    author: Link[User]\n\n# \u5efa\u7acb\u9023\u7d50\nuser = await User.find_one(User.name == \"Alice\")\npost = Post(title=\"Hello World\", author=user)\nawait post.save()\n\n# \u8b80\u53d6\u4e26\u89e3\u6790\u9023\u7d50\npost = await Post.find_one(Post.title == \"Hello World\", fetch_links=True)\nprint(post.author.name) # \"Alice\"\n</code></pre>"},{"location":"zh-tw/user-guide/#_3","title":"\u4e00\u5c0d\u591a","text":"<p>\u4f7f\u7528 <code>BackLink[T]</code> \u5b9a\u7fa9\u53cd\u5411\u95dc\u806f\u3002</p> <pre><code>from data_bridge import Document, BackLink\n\nclass User(Document):\n    name: str\n    # \u5f15\u7528\u6307\u5411\u6b64\u4f7f\u7528\u8005\u7684 Posts\n    posts: BackLink[\"Post\"] = BackLink(document_class=\"Post\", link_field=\"author\")\n\n# \u5b58\u53d6\u65b9\u5f0f\nuser = await User.find_one(User.name == \"Alice\", fetch_links=True)\nfor post in user.posts:\n    print(post.title)\n</code></pre>"},{"location":"zh-tw/user-guide/#programmatic-migrations","title":"\u7a0b\u5f0f\u5316\u9077\u79fb (Programmatic Migrations)","text":"<p><code>data-bridge</code> \u652f\u63f4\u7a0b\u5f0f\u5316\u9077\u79fb\uff0c\u8b93\u60a8\u7684\u8cc7\u6599\u5eab\u6a21\u5f0f (Schema) \u96a8\u6642\u9593\u6f14\u9032\u3002</p> <pre><code>from data_bridge.migrations import Migration, iterative_migration, run_migrations\n\n@iterative_migration(User, batch_size=50)\nclass NormalizeEmails(Migration):\n    version = \"001\"\n    description = \"\u5c07\u6240\u6709\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u8f49\u70ba\u5c0f\u5beb\"\n\n    async def transform(self, user: User) -&gt; User:\n        user.email = user.email.lower()\n        return user\n\n# \u57f7\u884c\u6240\u6709\u5f85\u8655\u7406\u7684\u9077\u79fb\nawait run_migrations([NormalizeEmails])\n</code></pre>"},{"location":"zh-tw/user-guide/#time-series-collections","title":"\u6642\u5e8f\u96c6\u5408 (Time-Series Collections)","text":"<p>\u5c0d\u65bc\u9ad8\u983b\u7387\u8cc7\u6599\uff0c\u53ef\u4ee5\u4f7f\u7528 MongoDB \u539f\u751f\u7684\u6642\u5e8f\u96c6\u5408\u3002</p> <pre><code>from datetime import datetime\nfrom data_bridge import Document\nfrom data_bridge.timeseries import TimeSeriesConfig, Granularity\n\nclass Measurement(Document):\n    timestamp: datetime\n    sensor_id: str\n    value: float\n\n    class Settings:\n        name = \"measurements\"\n        timeseries = TimeSeriesConfig(\n            time_field=\"timestamp\",\n            meta_field=\"sensor_id\",\n            granularity=Granularity.seconds,\n            expire_after_seconds=86400 * 7 # 7 \u5929\u904e\u671f (TTL)\n        )\n</code></pre>"},{"location":"zh-tw/user-guide/#http-http-client","title":"HTTP \u5ba2\u6236\u7aef (HTTP Client)","text":"<p>\u672c\u51fd\u5f0f\u5eab\u5305\u542b\u4e00\u500b\u7531 Rust (<code>reqwest</code>) \u652f\u63f4\u7684\u9ad8\u6548\u80fd\u975e\u540c\u6b65 HTTP \u5ba2\u6236\u7aef\uff0c\u5b83\u80fd\u7e5e\u904e GIL \u4ee5\u7372\u5f97\u6700\u5927\u541e\u5410\u91cf\u3002</p> <pre><code>from data_bridge.http import HttpClient\n\nclient = HttpClient(\n    base_url=\"https://api.example.com\",\n    timeout=30.0\n)\n\n# \u975e\u540c\u6b65 GET \u8acb\u6c42\nresponse = await client.get(\"/users/123\")\n\nif response.is_success():\n    data = response.json()\n    print(f\"\u4f7f\u7528\u8005: {data['name']}\")\n    print(f\"\u5ef6\u9072: {response.latency_ms}ms\")\n</code></pre>"}]}